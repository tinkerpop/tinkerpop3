function X2JS(s){var o="1.1.3";s=s||{};g();function g(){if(s.escapeMode===undefined){s.escapeMode=true;}s.attributePrefix=s.attributePrefix||"_";s.arrayAccessForm=s.arrayAccessForm||"none";s.emptyNodeForm=s.emptyNodeForm||"text";if(s.enableToStringFunc===undefined){s.enableToStringFunc=true;}s.arrayAccessFormPaths=s.arrayAccessFormPaths||[];if(s.skipEmptyTextNodesForObj===undefined){s.skipEmptyTextNodesForObj=true;}}var f={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function q(u){var v=u.localName;if(v==null){v=u.baseName;}if(v==null||v==""){v=u.nodeName;}return v;}function m(u){return u.prefix;}function n(u){if(typeof(u)=="string"){return u.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;");}else{return u;}}function i(u){return u.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/");}function j(y,v,x){switch(s.arrayAccessForm){case"property":if(!(y[v] instanceof Array)){y[v+"_asArray"]=[y[v]];}else{y[v+"_asArray"]=y[v];}break;}if(!(y[v] instanceof Array)&&s.arrayAccessFormPaths.length>0){var u=0;for(;u<s.arrayAccessFormPaths.length;u++){var w=s.arrayAccessFormPaths[u];if(typeof w==="string"){if(w==x){break;}}else{if(w instanceof RegExp){if(w.test(x)){break;}}else{if(typeof w==="function"){if(w(y,v,x)){break;}}}}}if(u!=s.arrayAccessFormPaths.length){y[v]=[y[v]];}}}function t(w,B){if(w.nodeType==f.DOCUMENT_NODE){var C=new Object;var u=w.childNodes;for(var D=0;D<u.length;D++){var v=u.item(D);if(v.nodeType==f.ELEMENT_NODE){var A=q(v);C[A]=t(v,A);}}return C;}else{if(w.nodeType==f.ELEMENT_NODE){var C=new Object;C.__cnt=0;var u=w.childNodes;for(var D=0;D<u.length;D++){var v=u.item(D);var A=q(v);if(v.nodeType!=f.COMMENT_NODE){C.__cnt++;if(C[A]==null){C[A]=t(v,B+"."+A);j(C,A,B+"."+A);}else{if(C[A]!=null){if(!(C[A] instanceof Array)){C[A]=[C[A]];j(C,A,B+"."+A);}}(C[A])[C[A].length]=t(v,B+"."+A);}}}for(var x=0;x<w.attributes.length;x++){var y=w.attributes.item(x);C.__cnt++;C[s.attributePrefix+y.name]=y.value;}var z=m(w);if(z!=null&&z!=""){C.__cnt++;C.__prefix=z;}if(C["#text"]!=null){C.__text=C["#text"];if(C.__text instanceof Array){C.__text=C.__text.join("\n");}if(s.escapeMode){C.__text=i(C.__text);}delete C["#text"];if(s.arrayAccessForm=="property"){delete C["#text_asArray"];}}if(C["#cdata-section"]!=null){C.__cdata=C["#cdata-section"];delete C["#cdata-section"];if(s.arrayAccessForm=="property"){delete C["#cdata-section_asArray"];}}if(C.__cnt==1&&C.__text!=null){C=C.__text;}else{if(C.__cnt==0&&s.emptyNodeForm=="text"){C="";}else{if(C.__cnt>1&&C.__text!=null&&s.skipEmptyTextNodesForObj){if(C.__text.trim()==""){delete C.__text;}}}}delete C.__cnt;if(s.enableToStringFunc&&C.__text!=null||C.__cdata!=null){C.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"");};}return C;}else{if(w.nodeType==f.TEXT_NODE||w.nodeType==f.CDATA_SECTION_NODE){return w.nodeValue;}}}}function k(B,y,A,v){var x="<"+((B!=null&&B.__prefix!=null)?(B.__prefix+":"):"")+y;if(A!=null){for(var z=0;z<A.length;z++){var w=A[z];var u=B[w];x+=" "+w.substr(s.attributePrefix.length)+"='"+u+"'";}}if(!v){x+=">";}else{x+="/>";}return x;}function h(v,u){return"</"+(v.__prefix!=null?(v.__prefix+":"):"")+u+">";}function p(v,u){return v.indexOf(u,v.length-u.length)!==-1;}function r(v,u){if((s.arrayAccessForm=="property"&&p(u.toString(),("_asArray")))||u.toString().indexOf(s.attributePrefix)==0||u.toString().indexOf("__")==0||(v[u] instanceof Function)){return true;}else{return false;}}function l(w){var v=0;if(w instanceof Object){for(var u in w){if(r(w,u)){continue;}v++;}}return v;}function a(w){var v=[];if(w instanceof Object){for(var u in w){if(u.toString().indexOf("__")==-1&&u.toString().indexOf(s.attributePrefix)==0){v.push(u);}}}return v;}function e(v){var u="";if(v.__cdata!=null){u+="<![CDATA["+v.__cdata+"]]>";}if(v.__text!=null){if(s.escapeMode){u+=n(v.__text);}else{u+=v.__text;}}return u;}function b(v){var u="";if(v instanceof Object){u+=e(v);}else{if(v!=null){if(s.escapeMode){u+=n(v);}else{u+=v;}}}return u;}function d(w,y,x){var u="";if(w.length==0){u+=k(w,y,x,true);}else{for(var v=0;v<w.length;v++){u+=k(w[v],y,a(w[v]),false);u+=c(w[v]);u+=h(w[v],y);}}return u;}function c(A){var u="";var y=l(A);if(y>0){for(var x in A){if(r(A,x)){continue;}var w=A[x];var z=a(w);if(w==null||w==undefined){u+=k(w,x,z,true);}else{if(w instanceof Object){if(w instanceof Array){u+=d(w,x,z);}else{var v=l(w);if(v>0||w.__text!=null||w.__cdata!=null){u+=k(w,x,z,false);u+=c(w);u+=h(w,x);}else{u+=k(w,x,z,true);}}}else{u+=k(w,x,z,false);u+=b(w);u+=h(w,x);}}}}u+=b(A);return u;}this.parseXmlString=function(u){if(u===undefined){return null;}var v;if(window.DOMParser){var w=new window.DOMParser();v=w.parseFromString(u,"text/xml");}else{if(u.indexOf("<?")==0){u=u.substr(u.indexOf("?>")+2);}v=new ActiveXObject("Microsoft.XMLDOM");v.async="false";v.loadXML(u);}return v;};this.asArray=function(u){if(u instanceof Array){return u;}else{return[u];}};this.xml2json=function(u){return t(u);};this.xml_str2json=function(u){var v=this.parseXmlString(u);return this.xml2json(v);};this.json2xml_str=function(u){return c(u);};this.json2xml=function(v){var u=this.json2xml_str(v);return this.parseXmlString(u);};this.getVersion=function(){return o;};}