(function(){window.IPv6={best:function(g){var g=g.toLowerCase().split(":"),k=g.length,i=8;""===g[0]&&""===g[1]&&""===g[2]?(g.shift(),g.shift()):""===g[0]&&""===g[1]?g.shift():""===g[k-1]&&""===g[k-2]&&g.pop();k=g.length;-1!==g[k-1].indexOf(".")&&(i=7);var e;for(e=0;e<k&&!(""===g[e]);e++);if(e<i)for(g.splice(e,1,"0000");g.length<i;)g.splice(e,0,"0000");for(e=0;e<i;e++){for(var k=g[e].split(""),f=0;3>f;f++)if("0"===k[0]&&1<k.length)k.splice(0,1);else break;g[e]=k.join("")}var k=-1,l=f=0,h=-1,o=!1;for(e=
0;e<i;e++)o?"0"===g[e]?l+=1:(o=!1,l>f&&(k=h,f=l)):"0"==g[e]&&(o=!0,h=e,l=1);l>f&&(k=h,f=l);1<f&&g.splice(k,f,"");k=g.length;i="";""===g[0]&&(beststr=":");for(e=0;e<k;e++){i+=g[e];if(e===k-1)break;i+=":"}""===g[k-1]&&(i+=":");return i}}})();(function(g){function k(a){throw RangeError(D[a]);}function i(a,b){for(var c=a.length;c--;)a[c]=b(a[c]);return a}function e(a){for(var b=[],c=0,e=a.length,d,j;c<e;)d=a.charCodeAt(c++),55296==(d&63488)&&(j=a.charCodeAt(c++),(55296!=(d&64512)||56320!=(j&64512))&&k("utf16decode"),d=((d&1023)<<10)+(j&1023)+65536),b.push(d);return b}function f(a){return i(a,function(a){var b="";55296==(a&63488)&&k("utf16encode");65535<a&&(a-=65536,b+=w(a>>>10&1023|55296),a=56320|a&1023);return b+=w(a)}).join("")}function l(a,
b,c){for(var d=0,a=c?p(a/E):a>>1,a=a+p(a/b);a>y*x>>1;d+=j)a=p(a/y);return p(d+(y+1)*a/(a+F))}function h(a){var b=[],c=a.length,d,e=0,g=A,i=B,q,h,m,n,s;q=a.lastIndexOf(C);0>q&&(q=0);for(h=0;h<q;++h)128<=a.charCodeAt(h)&&k("not-basic"),b.push(a.charCodeAt(h));for(q=0<q?q+1:0;q<c;){for(h=e,d=1,m=j;;m+=j){q>=c&&k("invalid-input");n=a.charCodeAt(q++);n=10>n-48?n-22:26>n-65?n-65:26>n-97?n-97:j;(n>=j||n>p((v-e)/d))&&k("overflow");e+=n*d;s=m<=i?z:m>=i+x?x:m-i;if(n<s)break;n=j-s;d>p(v/n)&&k("overflow");d*=
n}d=b.length+1;i=l(e-h,d,0==h);p(e/d)>v-g&&k("overflow");g+=p(e/d);e%=d;b.splice(e++,0,g)}return f(b)}function o(a){var b,c,d,g,f,i,h,r,m,n=[],s,o,u,a=e(a);s=a.length;b=A;c=0;f=B;for(i=0;i<s;++i)m=a[i],128>m&&n.push(w(m));for((d=g=n.length)&&n.push(C);d<s;){for(h=v,i=0;i<s;++i)m=a[i],m>=b&&m<h&&(h=m);o=d+1;h-b>p((v-c)/o)&&k("overflow");c+=(h-b)*o;b=h;for(i=0;i<s;++i)if(m=a[i],m<b&&++c>v&&k("overflow"),m==b){for(r=c,h=j;;h+=j){m=h<=f?z:h>=f+x?x:h-f;if(r<m)break;u=r-m;r=j-m;n.push(w(m+u%r+22+75*(26>
m+u%r)-0));r=p(u/r)}n.push(w(r+22+75*(26>r)-0));f=l(c,o,d==g);c=0;++d}++c;++b}return n.join("")}var a,b="function"==typeof define&&"object"==typeof define.amd&&define.amd&&define,c="object"==typeof exports&&exports,d="object"==typeof module&&module,v=2147483647,j=36,z=1,x=26,F=38,E=700,B=72,A=128,C="-",G=/[^ -~]/,H=/^xn--/,D={overflow:"Overflow: input needs wider integers to process.",utf16decode:"UTF-16(decode): illegal UTF-16 sequence",utf16encode:"UTF-16(encode): illegal UTF-16 value","not-basic":"Illegal input >= 0x80 (not a basic code point)",
"invalid-input":"Invalid input"},y=j-z,p=Math.floor,w=String.fromCharCode,u;a={version:"0.2.1",utf16:{decode:e,encode:f},decode:h,encode:o,toASCII:function(a){return i(a.split("."),function(a){return G.test(a)?"xn--"+o(a):a}).join(".")},toUnicode:function(a){return i(a.split("."),function(a){return H.test(a)?h(a.slice(4).toLowerCase()):a}).join(".")}};if(c)if(d&&d.exports==c)d.exports=a;else for(u in a)a.hasOwnProperty(u)&&(c[u]=a[u]);else b?define("punycode",a):g.punycode=a})(this);(function(g){function k(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function i(a){return"[object Array]"===""+Object.prototype.toString.call(a)}var e=function(a,b){if(!(this instanceof e))return new e(a);a===g&&(a=location.href+"");this.href(a);return b!==g?this.absoluteTo(b):this},f=e.prototype;e.idn_expression=/[^a-z0-9\.-]/i;e.punycode_expression=/(xn--)/i;e.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;e.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;
e.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/ig;e.defaultPorts={http:"80",https:"443",ftp:"21"};e.encode=encodeURIComponent;e.decode=decodeURIComponent;e.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=",
"%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}}};e.encodeQuery=function(a){return encodeURIComponent(a+"").replace(/%20/g,"+")};e.decodeQuery=function(a){return decodeURIComponent((a+"").replace(/\+/g,"%20"))};e.recodePath=function(a){for(var a=(a+"").split("/"),b=0,c=a.length;b<c;b++)a[b]=e.encodePathSegment(e.decode(a[b]));return a.join("/")};e.decodePath=function(a){for(var a=(a+"").split("/"),b=0,c=a.length;b<c;b++)a[b]=e.decodePathSegment(a[b]);return a.join("/")};
var l={encode:"encode",decode:"decode"},h;for(h in l)e[h+"PathSegment"]=function(a){return function(b){return window[a+"URIComponent"](b+"").replace(e.characters.pathname[a].expression,function(b){return e.characters.pathname[a].map[b]})}}(l[h]);e.parse=function(a){var b,c={};b=a.indexOf("#");if(-1<b)c.fragment=a.substring(b+1)||null,a=a.substring(0,b);b=a.indexOf("?");if(-1<b)c.query=a.substring(b+1)||null,a=a.substring(0,b);b=a.indexOf("://");if(-1<b)c.protocol=a.substring(0,b),a=a.substring(b+
3),a=e.parseAuthority(a,c);c.path=a;return c};e.parseHost=function(a,b){var c=a.indexOf("/");if(-1===c)c=a.length;if("["===a[0]){var d=a.indexOf("]");b.hostname=a.substring(1,d)||null;b.port=a.substring(d+2,c)||null}else a.indexOf(":")!==a.lastIndexOf(":")?(b.hostname=a.substring(0,c)||null,b.port=null):(t=a.substring(0,c).split(":"),b.hostname=t[0]||null,b.port=t[1]||null);b.hostname&&"/"!==a.substring(c)[0]&&(c++,a="/"+a);return a.substring(c)||"/"};e.parseAuthority=function(a,b){var c=a.indexOf("@"),
d=a.indexOf("/");-1<c&&(-1===d||c<d)?(t=a.substring(0,c).split(":"),b.username=t[0]?e.decode(t[0]):null,b.password=t[1]?e.decode(t[1]):null,a=a.substring(c+1)):(b.username=null,b.password=null);return e.parseHost(a,b)};e.parseQuery=function(a){if(!a)return{};a=a.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"");if(!a)return{};for(var b={},a=a.split("&"),c=a.length,d=0;d<c;d++){var g=a[d].split("="),j=e.decodeQuery(g.shift()),g=g.length?e.decodeQuery(g.join("=")):null;b[j]?("string"===typeof b[j]&&(b[j]=
[b[j]]),b[j].push(g)):b[j]=g}return b};e.build=function(a){var b="";"string"===typeof a.protocol&&a.protocol.length&&(b+=a.protocol+"://");b+=e.buildAuthority(a)||"";"string"===typeof a.path&&("/"!==a.path[0]&&"string"===typeof a.hostname&&(b+="/"),b+=a.path);"string"==typeof a.query&&(b+="?"+a.query);"string"===typeof a.fragment&&(b+="#"+a.fragment);return b};e.buildHost=function(a){var b="";if(a.hostname)e.ip6_expression.test(a.hostname)?b=a.port?b+("["+a.hostname+"]:"+a.port):b+a.hostname:(b+=
a.hostname,a.port&&(b+=":"+a.port));else return"";return b};e.buildAuthority=function(a){var b="";a.username&&(b+=e.encode(a.username),a.password&&(b+=":"+e.encode(a.password)),b+="@");return b+=e.buildHost(a)};e.buildQuery=function(a,b){var c="",d;for(d in a)if(Object.hasOwnProperty.call(a,d)&&d)if(i(a[d]))for(var f={},j=0,h=a[d].length;j<h;j++)a[d][j]!==g&&f[a[d][j]+""]===g&&(c+="&"+e.buildQueryParameter(d,a[d][j]),!0!==b&&(f[a[d][j]+""]=!0));else a[d]!==g&&(c+="&"+e.buildQueryParameter(d,a[d]));
return c.substring(1)};e.buildQueryParameter=function(a,b){return e.encodeQuery(a)+(null!==b?"="+e.encodeQuery(b):"")};e.addQuery=function(a,b,c){if("object"===typeof b)for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&e.addQuery(a,d,b[d]);else if("string"===typeof b)a[b]===g?a[b]=c:("string"===typeof a[b]&&(a[b]=[a[b]]),i(c)||(c=[c]),a[b]=a[b].concat(c));else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");};e.removeQuery=function(a,b,c){if(i(b))for(var c=
0,d=b.length;c<d;c++)a[b[c]]=g;else if("object"===typeof b)for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&e.removeQuery(a,d,b[d]);else if("string"===typeof b)if(c!==g)if(a[b]===c)a[b]=g;else{if(i(a[b])){var d=a[b],f={},j,h;if(i(c))for(j=0,h=c.length;j<h;j++)f[c[j]]=!0;else f[c]=!0;for(j=0,h=d.length;j<h;j++)f[d[j]]!==g&&(d.splice(j,1),h--,j--);a[b]=d}}else a[b]=g;else throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");};e.commonPath=function(a,b){var c=Math.min(a.length,
b.length),d;for(d=0;d<c;d++)if(a[d]!==b[d]){d--;break}if(1>d)return a[0]===b[0]&&"/"===a[0]?"/":"";"/"!==a[d]&&(d=a.substring(0,d).lastIndexOf("/"));return a.substring(0,d+1)};e.withinString=function(a,b){return a.replace(e.find_uri_expression,b)};f.build=function(a){if(!0===a)this._deferred_build=!0;else if(a===g||this._deferred_build)this._string=e.build(this._parts),this._deferred_build=!1;return this};f.toString=function(){return this.build(!1)._string};f.valueOf=function(){return this.toString()};
l={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"};for(h in l)f[h]=function(a){return function(b,c){if(b===g)return this._parts[a]||"";this._parts[a]=b;this.build(!c);return this}}(l[h]);l={query:"?",fragment:"#"};for(h in l)f[h]=function(a,b){return function(c,d){if(c===g)return this._parts[a]||"";null!==c&&(c+="",c[0]===b&&(c=c.substring(1)));this._parts[a]=c;this.build(!d);return this}}(h,l[h]);l={search:["?","query"],hash:["#","fragment"]};for(h in l)f[h]=
function(a,b){return function(c,d){var e=this[a](c,d);return"string"===typeof e&&e.length?b+e:e}}(l[h][1],l[h][0]);f.pathname=function(a,b){if(a===g||!0===a){var c=this._parts.path||"/";return a?e.decodePath(c):c}this._parts.path=a?e.recodePath(a):"/";this.build(!b);return this};f.path=f.pathname;f.href=function(a,b){if(a===g)return this.toString();this._string="";this._parts={protocol:null,username:null,password:null,hostname:null,port:null,path:null,query:null,fragment:null};var c=a instanceof e,
d="object"===typeof a&&(a.hostname||a.path),f;if("string"===typeof a)this._parts=e.parse(a);else if(c||d)for(f in c=c?a._parts:a,c)Object.hasOwnProperty.call(this._parts,f)&&(this._parts[f]=c[f]);else throw new TypeError("invalid input");this.build(!b);return this};f.is=function(a){var b=!1,c=!1,d=!1,f=!1,g=!1,h=!1,i=!0;this._parts.hostname&&(i=!1,c=e.ip4_expression.test(this._parts.hostname),d=e.ip6_expression.test(this._parts.hostname),b=c||d,g=(f=!b)&&e.idn_expression.test(this._parts.hostname),
h=f&&e.punycode_expression.test(this._parts.hostname));switch(a.toLowerCase()){case "relative":return i;case "domain":case "name":return f;case "ip":return b;case "ip4":case "ipv4":case "inet4":return c;case "ip6":case "ipv6":case "inet6":return d;case "idn":return g;case "punycode":return h}return null};f.host=function(a,b){if(a===g)return this._parts.hostname?e.buildHost(this._parts):"";e.parseHost(a,this._parts);this.build(!b);return this};f.authority=function(a,b){if(a===g)return this._parts.hostname?
e.buildAuthority(this._parts):"";e.parseAuthority(a,this._parts);this.build(!b);return this};f.subdomain=function(a,b){if(a===g)return!this._parts.hostname||this.is("IP")?"":this._parts.hostname.substring(0,this._parts.hostname.length-this.domain().length-1)||"";var c=this._parts.hostname.substring(0,this._parts.hostname.length-this.domain().length),c=RegExp("^"+k(c));a&&"."!==a[a.length-1]&&(a+=".");this._parts.hostname=this._parts.hostname.replace(c,a);this.build(!b);return this};f.domain=function(a,
b){if(a===g)return!this._parts.hostname||this.is("IP")?"":this._parts.hostname.match(/\.?([^\.]+\.[^\.]+)$/)[1]||this._parts.hostname;if(a)this._parts.hostname=!this._parts.hostname||this.is("IP")?a:this._parts.hostname.replace(RegExp(k(this.domain())+"$"),a);else throw new TypeError("cannot set domain empty");this.build(!b);return this};f.tld=function(a,b){if(a===g)return!this._parts.hostname||this.is("IP")?"":this._parts.hostname.substring(this._parts.hostname.lastIndexOf(".")+1);if(a){if(!this._parts.hostname||
this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");this._parts.hostname=this._parts.hostname.replace(RegExp(k(this.tld())+"$"),a)}else throw new TypeError("cannot set TLD empty");this.build(!b);return this};f.directory=function(a,b){if(a===g||!0===a){if(!this._parts.path||"/"===this._parts.path)return"/";var c=this._parts.path.substring(0,this._parts.path.length-this.filename().length-1)||"/";return a?e.decodePath(c):c}c=this._parts.path.substring(0,this._parts.path.length-
this.filename().length);c=RegExp("^"+k(c));this.is("relative")||(a||(a="/"),"/"!==a[0]&&(a="/"+a));a&&"/"!==a[a.length-1]&&(a+="/");a=e.recodePath(a);this._parts.path=this._parts.path.replace(c,a);this.build(!b);return this};f.filename=function(a,b){if(a===g||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var c=this._parts.path.substring(this._parts.path.lastIndexOf("/")+1);return a?e.decodePathSegment(c):c}"/"===a[0]&&(a=a.substring(1));c=RegExp(k(this.filename())+"$");a=e.recodePath(a);
this._parts.path=this._parts.path.replace(c,a);this.build(!b);return this};f.suffix=function(a,b){if(a===g||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var c=this.filename(),d=c.lastIndexOf(".");if(-1===d)return"";c=c.substring(d+1);res=/^[a-z0-9%]+$/i.test(c)?c:"";return a?e.decodePathSegment(res):res}"."===a[0]&&(a=a.substring(1));if(c=this.suffix())d=a?RegExp(k(c)+"$"):RegExp(k("."+c)+"$");else{if(!a)return this;this._parts.path+="."+e.recodePath(a)}if(d)a=e.recodePath(a),this._parts.path=
this._parts.path.replace(d,a);this.build(!b);return this};var o=f.query;f.query=function(a,b){if(!0===a)return e.parseQuery(this._parts.query);return a!==g&&"string"!==typeof a?(this._parts.query=e.buildQuery(a),this.build(!b),this):o.call(this,a,b)};f.addQuery=function(a,b,c){var d=e.parseQuery(this._parts.query);e.addQuery(d,a,b);this._parts.query=e.buildQuery(d);"string"!==typeof a&&(c=b);this.build(!c);return this};f.removeQuery=function(a,b,c){var d=e.parseQuery(this._parts.query);e.removeQuery(d,
a,b);this._parts.query=e.buildQuery(d);"string"!==typeof a&&(c=b);this.build(!c);return this};f.addSearch=f.addQuery;f.removeSearch=f.removeQuery;f.normalize=function(){return this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()};f.normalizeProtocol=function(a){if("string"===typeof this._parts.protocol)this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!a);return this};f.normalizeHostname=function(a){if(this._parts.hostname){if(this.is("IDN")&&
window.punycode)this._parts.hostname=punycode.toASCII(this._parts.hostname);else if(this.is("IPv6")&&window.IPv6)this._parts.hostname=IPv6.best(this._parts.hostname);this._parts.hostname=this._parts.hostname.toLowerCase();this.build(!a)}return this};f.normalizePort=function(a){if("string"===typeof this._parts.protocol&&this._parts.port===e.defaultPorts[this._parts.protocol])this._parts.port=null,this.build(!a);return this};f.normalizePath=function(a){if(!this._parts.path||"/"===this._parts.path)return this;
var b,c,d=this._parts.path,f,g;"/"!==d[0]&&("."===d[0]&&(c=d.substring(0,d.indexOf("/"))),b=!0,d="/"+d);for(d=d.replace(/(\/(\.\/)+)|\/{2,}/g,"/");;){f=d.indexOf("/../");if(-1===f)break;else if(0===f){d=d.substring(3);break}g=d.substring(0,f).lastIndexOf("/");-1===g&&(g=f);d=d.substring(0,g)+d.substring(f+3)}b&&this.is("relative")&&(d=c?c+d:d.substring(1));d=e.recodePath(d);this._parts.path=d;this.build(!a);return this};f.normalizePathname=f.normalizePath;f.normalizeQuery=function(a){if("string"===
typeof this._parts.query)this._parts.query.length?this.query(e.parseQuery(this._parts.query)):this._parts.query=null,this.build(!a);return this};f.normalizeFragment=function(a){if(!this._parts.fragment)this._parts.fragment=null,this.build(!a);return this};f.normalizeSearch=f.normalizeQuery;f.normalizeHash=f.normalizeFragment;f.readable=function(){var a=new e(this);a.username("").password("").normalize();var b="";a._parts.protocol&&(b+=a._parts.protocol+"://");a._parts.hostname&&(a.is("punycode")&&
window.punycode?(b+=punycode.toUnicode(a._parts.hostname),a._parts.port&&(b+=":"+a._parts.port)):b+=a.host());a._parts.hostname&&a._parts.path&&"/"!==a._parts.path[0]&&(b+="/");b+=a.path(!0);if(a._parts.query){for(var c="",d=0,f=a._parts.query.split("&"),j=f.length;d<j;d++){var h=(f[d]||"").split("="),c=c+("&"+e.decodeQuery(h[0]).replace(/&/g,"%26"));h[1]!==g&&(c+="="+e.decodeQuery(h[1]).replace(/&/g,"%26"))}b+="?"+c.substring(1)}return b+=a.hash()};f.absoluteTo=function(a){if(!this.is("relative"))throw Error("Cannot resolve non-relative URL");
a instanceof e||(a=new e(a));for(var b=new e(this),c=["protocol","username","password","hostname","port"],d=0,f;f=c[d];d++)b._parts[f]=a._parts[f];if("/"!==b.path()[0])b._parts.path=a.directory()+"/"+b._parts.path,b.normalizePath();b.build();return b};f.relativeTo=function(a){a instanceof e||(a=new e(a));if("/"!==this.path()[0]||"/"!==a.path()[0])throw Error("Cannot calculate common path from non-relative URLs");for(var b=new e(this),c=["protocol","username","password","hostname","port"],d=e.commonPath(b.path(),
a.path()),a=a.directory(),f=0,g;g=c[f];f++)b._parts[g]=null;if(!d||"/"===d)return b;if(a+"/"===d)b._parts.path="./"+b.filename();else{c="../";d=RegExp("^"+k(d));for(a=a.replace(d,"/").match(/\//g).length-1;a--;)c+="../";b._parts.path=b._parts.path.replace(d,c)}b.build();return b};f.equals=function(a){var b=new e(this),c=new e(a),d={},f={},a={},g;b.normalize();c.normalize();if(b.toString()===c.toString())return!0;d=b.query();f=c.query();b.query("");c.query("");if(b.toString()!==c.toString())return!1;
if(d.length!==f.length)return!1;d=e.parseQuery(d);f=e.parseQuery(f);for(g in d)if(Object.prototype.hasOwnProperty.call(d,g)){if(i(d[g])){if(!i(f[g]))return!1;if(d[g].length!==f[g].length)return!1;d[g].sort();f[g].sort();b=0;for(c=d[g].length;b<c;b++)if(d[g][b]!==f[g][b])return!1}else if(d[g]!==f[g])return!1;a[g]=!0}for(g in f)if(Object.prototype.hasOwnProperty.call(f,g)&&!a[g])return!1;return!0};window.URI=e})();